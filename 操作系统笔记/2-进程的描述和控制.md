### 进程的描述和控制

#### 进程的描述

1. 进程的定义：在多道程序环境下，程序的执行属于并发执行，为了使程序能并发执行，并且可以对并发执行的程序加以描述和控制，才引入了“进程”这个概念。**进程是作为资源分配和独立运行的基本单位**
2. PCB：为了使参与并发执行的每个程序都能独立运行，OS定义个一个专门的数据结构，称为进程控制（PCB），用PCB来描述进程的基本情况和活动过程，进而管理进程。这样，由程序段，相应的数据段和PCB三部分构成了进程。一般来说创建进程就是创建PCB，撤销进程就是撤销PCB。

##### 进程的特征

1. 动态性。进程由创建而产生，由调度而执行，由撤销而消亡
2. 并发性。指多个进程同时在内存中，且能在同一时间段执行，而程序（没有建立PCB块）不能参与并发执行
3. 独立性，指进程是一个能独立运行、独立获得资源和独立接收调度的基本单位，凡是未建立PCB块的程序都不能作为一个独立的单位参与运行
4. 异步性，是指进程是按异步方式运行的，即按各自独立的、不可预知的速度向前推进

##### 进程的三种基本状态

​	多个进程在并发执行是共享系统资源，导致他们在运行过程中呈现间断性的运行规律，所以在生命周期内可能有多种状态

1. 就绪状态。进程已经准备好运行，进程已经分配到除CPU意外的所有资源，只要再获得CPU许可，便可立即执行。如果系统中有许多就绪状态的进程，通常将它们按一定的策略排成一个队列，称为就绪队列
2. 执行状态。进程已获得CPU，程序正在执行。
3. 阻塞状态。正在执行的进程由于发生某些时间（IO请求，申请缓冲区失败）暂时无法继续执行的状态。一般也将处于阻塞状态的进程排成一个队列，叫做阻塞队列
4. 基本状态的转换![1570675991329](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1570675991329.png)

##### 进程的挂起操作

为了分析进程，引入了挂起操作。当该操作用于某个进程该进程将被挂起，即进程处于静止状态。如果进程正在执行，它将暂停执行，如果处于就绪，此时进程不接受调度。与挂起对应的是激活操作。

挂起的原因：

1. 终端用户的需要。用于在自己的程序永兴期间发现问题，希望暂停程序的执行
2. 父进程请求。有时父进程希望挂起自己某个子进程，协调子进程之间的活动

##### 进程控制块PCB的作用

​	PCB作为进程的一部分，记录了操作系统所需的，用于描述进程的当前情况以及管理进程运行的全部信息。

1. 作为独立运行基本单位的标志。

2. 实现间断性的运行方式。

   当进程引阻塞而暂停时，它必须保留自己运行时的CPU现场信息，再次被调度运行时，还需恢复现场信息。有了PCB之后，就可以将CPU现场信息保存在被中断进程的PCB中。

3. 提供进程管理所需要的信息。

   当调度彻骨调度到某进程运行时，只能根据进程PCB中记录的程序在内存或者外存中的指针去找相应的程序

4. 提供进程调度所需要的信息。

   只有处于就绪状态的进程才能被调度执行，而在PCB中就提供了进程处于何种状态的信息。

#### 进程控制

​	主要包括创建新进程、终止已完成的进程、将发生异常的进程置于阻塞状态，负责进程的转换等功能

##### 操作系统内核

​	操作系统一般被划分为多个层次，将不同的功能分别设置在不同的层次中，通常将一些常用的程序及运行频率较高的模块（始终管理，进程调度）常驻内存，也被称为OS内核，一方面对这些软件进行保护，也可以提高OS运行效率。

​	同样为了防止OS以及一些关键数据（如PCB）遭受到破坏，通常也将OS的执行状态分为系统态和用户态两种。

1. 系统态：也叫内核态，有较高的特权，能执行一切指令，访问所有的寄存器和存储区
2. 用户态，也叫目态，具有较低的执行权限，仅能执行规定的指令

##### 进程的创建

1. 进程的层次结构

   在OS中，允许一个进程创建另一个进程，吧创建进程的进程叫做父进程，另外一个叫做子进程，子进程可以创建孙进程。

   在UNIX中，进程与子孙进程组成了一个进程家族树。子进程可以继承父进程所有的资源。

   ![1570682325195](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1570682325195.png)

   在windows中，进程不存在层次结构，所有进程具有相同的地位，通过句柄来控制其他进程。

2. 引起创建进程的事件

   1. 用户登录。用户在终端登录成功之后，系统将为该用户建立一个进程，并将其插入就绪队列中
   2. 作业调度。当作业调度程序按照一定的算法调度到某些作业时，便将他们装入内存，为他们创建进程，并把插入到就绪队列
   3. 提供服务。当运行中的程序提出某种请求时，系统将专门创建一个进程来提供用户所需的服务，比如打印机

3. 进程的创建过程

   1. 申请空白PCB(进程控制块)，为新进程申请唯一的数字标识符，并从PCB集合中索取一个空白PCB
   2. 为进程分配其运行所需的资源，包括物理和逻辑资源
   3. 初始化PCB
   4. 如果进程就绪队列能接纳新进程，便将新进程插入就绪队列

#### 进程同步

#### 进程通信

#### 线程



