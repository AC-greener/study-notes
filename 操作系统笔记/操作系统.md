## 存储器管理

### 1，存储器的层次结构

1. 寄存器，属于CPU寄存器
2. 高速缓存，属于主存
3. 主存储器，属于主存
4. 磁盘缓存，属于主存
5. 固定磁盘，属于辅存
6. 可移动存储介质，属于辅存

在存储器中越靠近CPU，访问速度越快，存储容量也越小

1. 主存储器。用于保存进程运行时的程序和数据，由于主存储器访问速度远低于CPU执行指令的速度，为了缓和这个问题，引入了寄存器和高速缓存。
2. 寄存器。和处理机有相同的速度，所以对寄存器的访问速度最快，完全能与CPU协调工作，但是价格昂贵，容量不大。
3. 高速缓存。主要备份主存中常用的数据，减少处理机对主存储器的访问次数，可以大幅度提高程序执行速度。
4. 磁盘缓存。磁盘的IO速度远低于对主存的访问速度，为了缓和两者之间在速度上的不匹配，出现了磁盘缓存，主要用于存放频繁使用的一部分磁盘数据，以减少磁盘的访问次数。

### 2，程序的装入和链接

程序在运行时，必须先将其装入内存，然后将其转变成一个可执行程序，通常要经过以下三个步骤：

1. 编译：由编译程序对用户源程序进行编译，形成若干个目标模块。
2. 链接：由链接程序将编译后形成的一组目标模块以及他们所需要的库函数链接在一起，形成一个完整的装入模块
3. 装入：由装入程序将装入模块装入内存

**装入**

1. 绝对装入方式

   当计算机系统很小，仅能运行单道程序时，完全有可能知道程序将驻留在内存的什么位置。此时可以采用绝对装入。程序经过编译后，将产生绝对（物理）地址的代码

2. 可重定位装入方式

   绝对装入只能将程序装入内存中事先指定的位置，只适用于单道程序环境。而在多道程序环境下，编译程序不可能预知编译后的目标模块存放的位置，这时可以采用可冲定位装入方式，它可以根据内存的具体情况将装入模块装入到内存得适当位置。

3. 动态运行时装入方式

   可重定位装入方式并不允许程序在运行时在内存中移动位置。比如一个进程可能被多次换出，又被多次换入，每次换入后的位置通常时不同的。这时，可以采用动态运行时装入方式，他把装入模块装入内存后，并不会立即把模块中的逻辑地址转换成物体地址，而是吧地址的转换推迟到程序真正要执行时才进行

**链接**

1. 静态链接方式

   将目标模块及他们所需的库函数链接成一个完整的装配模块，以后不再拆开。

2. 装入时动态链接

   将用户编译后的一组目标模块，在装入内存时，采用边装入边链接的链接方式。

   便于修改和更新。静态链接如果要修改或更新其中的某个目标模块，必须重新打开模块，非常低效，在动态链接中由于各目标模块是分开存放的，所以修改或更新目标模块很容易

   便于实现对目标模块的共享。静态链接中每个模块必须含有目标模块的拷贝，无法实现对目标模块的共享。动态链接很容易讲一个目标模块链接到几个应用模块上，实现共享

3. 运行时动态链接

   对某些模块的链接推迟到程序的执行时才进行。在执行过程中，当发现一个被调用模块尚未装入内存时，立即由OS去找该模块，并装入内存，这样，凡是在执行过程中未被找到的模块，都不会被调入内存和被链接到装入模块上，这样不仅能加快程序的装入，还节省了大量内存空间

### 3，连续分配存储管理方式

​	为了将程序装入内存，必须分配一定大小的内存空间，该分配方式为程序分配一个连续的内存空间，可以理解为，**程序中代码或数据的逻辑地址相邻，体现在内存空间分配时物理地址的相邻**，连续分配方式可以分为四类

1. 单一连续分配
2. 固定分区分配
3. 动态分区分配基于顺序搜索的动态分区分配算法

### 4，分页存储管理方式





